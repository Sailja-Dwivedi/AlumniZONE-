<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AlumniZONE | Connect & Grow</title>
  <style>
    /* Base Styles */
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #e74c3c;
      --success-color: #2ecc71;
      --text-color: #333;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
      --shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      overflow-x: hidden;
    }
    
    .hidden { 
      display: none !important; 
    }
    
    /* Typography */
    h1, h2, h3 {
      line-height: 1.2;
      margin-bottom: 1rem;
    }
    
    p {
      margin-bottom: 1.5rem;
    }
    
    /* Buttons */
    .btn {
      display: inline-block;
      padding: 0.6rem 1.2rem;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    .btn-close {
      background: var(--secondary-color);
    }
    
    .btn-outline {
      background: transparent;
      border: 2px solid white;
      color: white;
    }
    
    .btn-success {
      background: var(--success-color);
    }
    
    /* Layout */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    
    section {
      padding: 4rem 0;
    }
    
    /* Navbar */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background-color: var(--primary-color);
      color: white;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow);
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: 600;
      color: white;
      text-decoration: none;
    }
    
    .nav-links {
      display: flex;
      list-style: none;
    }
    
    .nav-links li {
      margin-left: 1.5rem;
    }
    
    .nav-links a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: opacity 0.3s;
    }
    
    .nav-links a:hover {
      opacity: 0.8;
    }
    
    .menu-toggle {
      display: none;
      cursor: pointer;
      font-size: 1.5rem;
    }
    
    /* Hero Section */
    .hero {
      background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://via.placeholder.com/1920x1080');
      background-size: cover;
      background-position: center;
      color: white;
      text-align: center;
      padding: 8rem 1rem 5rem;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .hero-content {
      max-width: 800px;
    }
    
    .hero h1 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
    }
    
    .hero p {
      font-size: 1.2rem;
      margin-bottom: 2.5rem;
    }
    
    .hero-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    /* Forms */
    .form-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: var(--shadow);
      z-index: 1001;
      display: none;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .form-popup h2 {
      margin-bottom: 1.5rem;
      color: var(--primary-color);
      text-align: center;
    }
    
    .form-popup input,
    .form-popup select {
      width: 100%;
      padding: 0.8rem;
      margin-bottom: 1rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: 'Poppins', sans-serif;
    }
    
    .form-popup .form-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
    }
    
    .form-message {
      padding: 0.5rem;
      margin-bottom: 1rem;
      border-radius: 4px;
      text-align: center;
    }
    
    .form-message.success {
      background-color: rgba(46, 204, 113, 0.2);
      color: var(--success-color);
    }
    
    .form-message.error {
      background-color: rgba(231, 76, 60, 0.2);
      color: var(--secondary-color);
    }
    
    /* About Section */
    .about {
      text-align: center;
      background-color: var(--light-color);
    }
    
    .about h2 {
      font-size: 2rem;
      margin-bottom: 2rem;
    }
    
    .about p {
      max-width: 800px;
      margin: 0 auto 2rem;
    }
    
    /* Features Section */
    .features {
      text-align: center;
      background-color: white;
    }
    
    .features h2 {
      font-size: 2rem;
      margin-bottom: 3rem;
    }
    
    .features-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
    }
    
    .feature-box {
      flex: 1;
      min-width: 300px;
      max-width: 400px;
      padding: 2rem;
      background: var(--light-color);
      border-radius: 8px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease;
    }
    
    .feature-box:hover {
      transform: translateY(-10px);
    }
    
    .feature-box h3 {
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      padding: 2rem;
      background-color: var(--dark-color);
      color: white;
    }
    
    /* Overlay */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      display: none;
    }
    
    /* Dashboard Styles */
    .dashboard {
      display: none;
      padding-top: 70px;
    }
    
    .dashboard-header {
      background-color: var(--primary-color);
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 999;
    }
    
    .dashboard-container {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    
    .dashboard-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: var(--shadow);
    }
    
    /* Responsive Styles */
    @media (max-width: 768px) {
      .navbar {
        flex-wrap: wrap;
      }
      
      .menu-toggle {
        display: block;
      }
      
      .nav-links {
        display: none;
        width: 100%;
        flex-direction: column;
        margin-top: 1rem;
      }
      
      .nav-links.show {
        display: flex;
      }
      
      .nav-links li {
        margin: 0.5rem 0;
      }
      
      .hero {
        padding-top: 6rem;
      }
      
      .hero h1 {
        font-size: 2rem;
      }
      
      .hero p {
        font-size: 1rem;
      }
      
      .hero-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .hero-buttons .btn {
        width: 100%;
        max-width: 250px;
        margin-bottom: 1rem;
      }
      
      .feature-box {
        min-width: 100%;
      }
      
      .form-popup {
        padding: 1.5rem;
      }
      
      .form-popup .form-footer {
        flex-direction: column;
      }
      
      .form-popup .btn {
        width: 100%;
        margin-bottom: 0.5rem;
      }
    }
    
    @media (max-width: 480px) {
      .hero {
        padding: 5rem 1rem 3rem;
      }
      
      .hero h1 {
        font-size: 1.8rem;
      }
      
      section {
        padding: 3rem 0;
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <!-- Main Content -->
  <div id="mainContent">
    <!-- Navbar -->
    <header class="navbar">
      <a href="#" class="logo">AlumniZONE</a>
      <div class="menu-toggle" id="mobile-menu">
        <i class="fas fa-bars"></i>
      </div>
      <nav>
        <ul class="nav-links" id="nav-links">
          <li><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#" onclick="openLoginForm()">LogIN</a></li>
          <li><a href="#" onclick="openForm()" class="btn">Register</a></li>
        </ul>
      </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content container">
        <h1>Welcome to AlumniZONE</h1>
        <p>Connecting Alumni, Students & Recruiters for a Brighter Future!</p>
        <div class="hero-buttons">
          <button onclick="openForm()" class="btn">Register</button>
          <button onclick="openLoginForm()" class="btn btn-outline">LogIN</button>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
      <div class="container">
        <h2>About AlumniZONE</h2>
        <p>AlumniZONE is your trusted platform to connect with university alumni, find recruiters, and participate in exclusive events. Build your network and open doors to new opportunities!</p>
        <p>Our mission is to bridge the gap between alumni, current students, and potential employers, creating a thriving community that benefits all members.</p>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
      <div class="container">
        <h2>Why Join AlumniZONE?</h2>
        <div class="features-container">
          <div class="feature-box">
            <h3><i class="fas fa-user-graduate"></i> For Alumni</h3>
            <p>Reconnect with your university, mentor juniors, and share opportunities. Stay updated with alumni events and network with your batchmates.</p>
          </div>
          <div class="feature-box">
            <h3><i class="fas fa-user"></i> For Students</h3>
            <p>Get career guidance, find internships, and learn from experienced alumni. Access exclusive job postings and build your professional network.</p>
          </div>
          <div class="feature-box">
            <h3><i class="fas fa-briefcase"></i> For Recruiters</h3>
            <p>Hire talented alumni and students verified by the university. Post jobs, search profiles, and connect directly with potential candidates.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2025 AlumniZONE. All rights reserved.</p>
        <div class="social-links" style="margin-top: 1rem;">
          <a href="#" style="color: white; margin: 0 10px;"><i class="fab fa-facebook-f"></i></a>
          <a href="#" style="color: white; margin: 0 10px;"><i class="fab fa-twitter"></i></a>
          <a href="#" style="color: white; margin: 0 10px;"><i class="fab fa-linkedin-in"></i></a>
          <a href="#" style="color: white; margin: 0 10px;"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </footer>
  </div>

  <!-- Registration Form -->
  <div class="overlay" id="overlay"></div>
  
  <div class="form-popup" id="registerForm">
    <h2>Register</h2>
    <form id="registrationForm">
      <div id="registerMessage" class="form-message hidden"></div>
      
      <!-- Name -->
      <input type="text" id="registerName" placeholder="Full Name" required>

      <!-- Email -->
      <input type="email" id="registerEmail" placeholder="Email ID" required>

      <!-- Phone (Optional) -->
      <input type="tel" id="registerPhone" placeholder="Phone Number">

      <!-- Dropdown: User Type -->
      <select id="userType" onchange="toggleUniversityDropdown()" required>
        <option value="">Select User Type</option>
        <option value="university">University</option>
        <option value="alumni">Alumni</option>
        <option value="recruiter">Recruiter</option>
      </select>

      <!-- Dropdown: University Name (Only if Alumni selected) -->
      <select id="universityName" class="hidden">
        <option value="">Choose Your University Name</option>
        <option value="Makhanlal Chaturvedi University">Makhanlal Chaturvedi University</option>
        <option value="Delhi University">Delhi University</option>
        <option value="Mumbai University">Mumbai University</option>
        <option value="JNU">JNU</option>
        <option value="IGNOU">IGNOU</option>
      </select>
      
      <!-- OTP Verification Section (Initially hidden) -->
      <div id="otpVerificationSection" class="hidden">
        <h3>OTP Verification</h3>
        <p>We've sent an OTP to your email. Please enter it below:</p>
        <input type="text" id="registerOtpInput" placeholder="Enter OTP" class="hidden">
      </div>

      <!-- Form Footer -->
      <div class="form-footer">
        <button type="button" id="submitRegisterBtn" class="btn" onclick="submitRegistration()">Submit</button>
        <button type="button" id="verifyRegisterOtpBtn" class="btn btn-success hidden" onclick="verifyRegistrationOTP()">Verify OTP</button>
        <button type="button" class="btn btn-close" onclick="closeForm()">Close</button>
      </div>
    </form>
  </div>

  <!-- Login Form -->
  <div class="form-popup" id="loginForm">
    <h2>Login</h2>
    <form id="otpLoginForm">
      <div id="loginMessage" class="form-message hidden"></div>
      
      <input type="email" id="loginEmail" placeholder="Email" required>
      <button type="button" class="btn" onclick="sendLoginOTP()">Send OTP</button>
      <input type="text" id="otpInput" placeholder="Enter OTP" class="hidden">
      <button type="button" class="btn btn-success hidden" id="verifyOtpBtn" onclick="verifyLoginOTP()">Verify OTP</button>
      <div class="form-footer">
        <button type="button" class="btn btn-close" onclick="closeLoginForm()">Close</button>
      </div>
    </form>
  </div>

  <!-- Dashboard Sections -->
  <div id="alumniDashboard" class="dashboard">
    <header class="dashboard-header">
      <h1>Alumni Dashboard</h1>
      <button class="btn" onclick="logout()">Logout</button>
    </header>
    
    <div class="dashboard-container">
      <div class="dashboard-card">
        <h2>Welcome, Alumni!</h2>
        <p>Here you can connect with your university, network with other alumni, and find opportunities.</p>
      </div>
      
      <div class="dashboard-card">
        <h3>Your Profile</h3>
        <div id="alumniProfile"></div>
      </div>
      
      <div class="dashboard-card">
        <h3>Upcoming Events</h3>
        <div id="alumniEvents"></div>
      </div>
    </div>
  </div>

  <div id="recruiterDashboard" class="dashboard">
    <header class="dashboard-header" style="background-color: #e74c3c;">
      <h1>Recruiter Dashboard</h1>
      <button class="btn" style="background-color: #e74c3c;" onclick="logout()">Logout</button>
    </header>
    
    <div class="dashboard-container">
      <div class="dashboard-card">
        <h2>Welcome, Recruiter!</h2>
        <p>Find and connect with talented alumni from top universities.</p>
      </div>
      
      <div class="dashboard-card">
        <h3>Post New Job</h3>
        <form id="jobPostForm">
          <input type="text" placeholder="Job Title" required>
          <textarea placeholder="Job Description" required></textarea>
          <button type="submit" class="btn" style="background-color: #e74c3c;">Post Job</button>
        </form>
      </div>
      
      <div class="dashboard-card">
        <h3>Your Job Posts</h3>
        <div id="jobPosts"></div>
      </div>
    </div>
  </div>

  <div id="universityDashboard" class="dashboard">
    <header class="dashboard-header" style="background-color: #2ecc71;">
      <h1>University Dashboard</h1>
      <button class="btn" style="background-color: #2ecc71;" onclick="logout()">Logout</button>
    </header>
    
    <div class="dashboard-container">
      <div class="dashboard-card">
        <h2>Welcome, University Administrator!</h2>
        <p>Manage your alumni network and university profile.</p>
      </div>
      
      <div class="dashboard-card">
        <h3>University Profile</h3>
        <div id="universityProfile"></div>
      </div>
      
      <div class="dashboard-card">
        <h3>Alumni Management</h3>
        <div id="alumniManagement"></div>
      </div>
    </div>
  </div>

  <script>
    // API Configuration
    const API_BASE_URL = 'https://alumni-web-api.onrender.com/api/auth';
    
    // Check if user is already logged in
    document.addEventListener('DOMContentLoaded', function() {
      const authToken = localStorage.getItem('authToken');
      const userRole = localStorage.getItem('userRole');
      
      if (authToken && userRole) {
        showDashboard(userRole);
      }
    });

    // Mobile Menu Toggle
    const mobileMenu = document.getElementById('mobile-menu');
    const navLinks = document.getElementById('nav-links');
    
    mobileMenu.addEventListener('click', () => {
      navLinks.classList.toggle('show');
    });
    
    // Close mobile menu when a link is clicked
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('show');
      });
    });
    
    // Form Functions
    const overlay = document.getElementById('overlay');
    
    // Open Registration Form
    function openForm() {
      document.getElementById("registerForm").style.display = "block";
      overlay.style.display = "block";
      document.body.style.overflow = "hidden";
      resetRegistrationForm();
    }
    
    // Close Registration Form
    function closeForm() {
      document.getElementById("registerForm").style.display = "none";
      overlay.style.display = "none";
      document.body.style.overflow = "auto";
      resetRegistrationForm();
    }
    
    // Reset registration form to initial state
    function resetRegistrationForm() {
      document.getElementById("userType").value = "";
      document.getElementById("universityName").classList.add("hidden");
      document.getElementById("universityName").required = false;
      document.getElementById("registrationForm").reset();
      document.getElementById("registerMessage").classList.add("hidden");
      document.getElementById("otpVerificationSection").classList.add("hidden");
      document.getElementById("registerOtpInput").classList.add("hidden");
      document.getElementById("submitRegisterBtn").classList.remove("hidden");
      document.getElementById("verifyRegisterOtpBtn").classList.add("hidden");
    }
    
    // Show/Hide University Dropdown based on User Type
    function toggleUniversityDropdown() {
      var userType = document.getElementById("userType").value;
      var universityDropdown = document.getElementById("universityName");
    
      if (userType === "alumni") {
        universityDropdown.classList.remove("hidden");
        universityDropdown.required = true;
      } else {
        universityDropdown.classList.add("hidden");
        universityDropdown.required = false;
      }
    }
    
    // Handle Registration Form Submission
    async function submitRegistration() {
      const name = document.getElementById("registerName").value;
      const email = document.getElementById("registerEmail").value;
      const phone = document.getElementById("registerPhone").value;
      const role = document.getElementById("userType").value;
      const university = document.getElementById("universityName").value;
      
      const registerMessage = document.getElementById("registerMessage");
      registerMessage.classList.add("hidden");
      
      // Basic validation
      if (!name || !email || !role) {
        registerMessage.textContent = "Please fill all required fields";
        registerMessage.classList.remove("success");
        registerMessage.classList.add("error");
        registerMessage.classList.remove("hidden");
        return;
      }
      
      if (role === "alumni" && !university) {
        registerMessage.textContent = "Please select your university";
        registerMessage.classList.remove("success");
        registerMessage.classList.add("error");
        registerMessage.classList.remove("hidden");
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE_URL}/register`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            name,
            email,
            role,
            university: role === 'alumni' ? university : undefined
          })
        });
        
        const data = await response.json();
        
        if (response.ok) {
          // Show OTP verification section
          document.getElementById("otpVerificationSection").classList.remove("hidden");
          document.getElementById("registerOtpInput").classList.remove("hidden");
          document.getElementById("submitRegisterBtn").classList.add("hidden");
          document.getElementById("verifyRegisterOtpBtn").classList.remove("hidden");
          
          registerMessage.textContent = data.message || "OTP sent to your email!";
          registerMessage.classList.remove("error");
          registerMessage.classList.add("success");
          registerMessage.classList.remove("hidden");
        } else {
          registerMessage.textContent = data.message || "Registration failed!";
          registerMessage.classList.remove("success");
          registerMessage.classList.add("error");
          registerMessage.classList.remove("hidden");
        }
      } catch (error) {
        registerMessage.textContent = "Network error. Please try again.";
        registerMessage.classList.remove("success");
        registerMessage.classList.add("error");
        registerMessage.classList.remove("hidden");
        console.error("Registration error:", error);
      }
    }
    
    // Verify OTP for registration
    async function verifyRegistrationOTP() {
      const email = document.getElementById("registerEmail").value;
      const otp = document.getElementById("registerOtpInput").value;
      const registerMessage = document.getElementById("registerMessage");
      registerMessage.classList.add("hidden");
      
      if (!otp) {
        registerMessage.textContent = "Please enter the OTP";
        registerMessage.classList.remove("success");
        registerMessage.classList.add("error");
        registerMessage.classList.remove("hidden");
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE_URL}/verify-otp`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email, otp })
        });
        
        const data = await response.json();
        
        if (response.ok) {
          registerMessage.textContent = data.message || "Registration successful!";
          registerMessage.classList.remove("error");
          registerMessage.classList.add("success");
          registerMessage.classList.remove("hidden");
          
          // Store the token and user role in localStorage
          if (data.token) {
            localStorage.setItem('authToken', data.token);
            localStorage.setItem('userRole', data.role);
          }
          
          // Show the appropriate dashboard
          showDashboard(data.role);
          
          // Close the form after a short delay
          setTimeout(() => {
            closeForm();
          }, 1500);
        } else {
          registerMessage.textContent = data.message || "Invalid OTP!";
          registerMessage.classList.remove("success");
          registerMessage.classList.add("error");
          registerMessage.classList.remove("hidden");
        }
      } catch (error) {
        registerMessage.textContent = "Network error. Please try again.";
        registerMessage.classList.remove("success");
        registerMessage.classList.add("error");
        registerMessage.classList.remove("hidden");
        console.error("OTP verification error:", error);
      }
    }
    
    // Login form functions
    function openLoginForm() {
      document.getElementById("loginForm").style.display = "block";
      overlay.style.display = "block";
      document.body.style.overflow = "hidden";
      resetLoginForm();
    }
    
    function closeLoginForm() {
      document.getElementById("loginForm").style.display = "none";
      overlay.style.display = "none";
      document.body.style.overflow = "auto";
      resetLoginForm();
    }
    
    function resetLoginForm() {
      document.getElementById("otpInput").classList.add("hidden");
      document.getElementById("verifyOtpBtn").classList.add("hidden");
      document.getElementById("otpLoginForm").reset();
      document.getElementById("loginMessage").classList.add("hidden");
    }
    
    // Send OTP for login
    async function sendLoginOTP() {
      const email = document.getElementById("loginEmail").value;
      const loginMessage = document.getElementById("loginMessage");
      loginMessage.classList.add("hidden");
      
      if (!email) {
        loginMessage.textContent = "Please enter your email";
        loginMessage.classList.remove("success");
        loginMessage.classList.add("error");
        loginMessage.classList.remove("hidden");
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE_URL}/login`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email })
        });
        
        const data = await response.json();
        
        if (response.ok) {
          loginMessage.textContent = data.message || "OTP sent to your email!";
          loginMessage.classList.remove("error");
          loginMessage.classList.add("success");
          loginMessage.classList.remove("hidden");
          
          document.getElementById("otpInput").classList.remove("hidden");
          document.getElementById("verifyOtpBtn").classList.remove("hidden");
        } else {
          loginMessage.textContent = data.message || "Login failed!";
          loginMessage.classList.remove("success");
          loginMessage.classList.add("error");
          loginMessage.classList.remove("hidden");
        }
      } catch (error) {
        loginMessage.textContent = "Network error. Please try again.";
        loginMessage.classList.remove("success");
        loginMessage.classList.add("error");
        loginMessage.classList.remove("hidden");
        console.error("Login error:", error);
      }
    }
    
    // Verify OTP for login
    async function verifyLoginOTP() {
      const email = document.getElementById("loginEmail").value;
      const otp = document.getElementById("otpInput").value;
      const loginMessage = document.getElementById("loginMessage");
      loginMessage.classList.add("hidden");
      
      if (!otp) {
        loginMessage.textContent = "Please enter the OTP";
        loginMessage.classList.remove("success");
        loginMessage.classList.add("error");
        loginMessage.classList.remove("hidden");
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE_URL}/verify-otp`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email, otp })
        });
        
        const data = await response.json();
        
        console.log(data)
        if (response.ok) {
          loginMessage.textContent = data.message || "Login successful!";
          loginMessage.classList.remove("error");
          loginMessage.classList.add("success");
          loginMessage.classList.remove("hidden");
          
          // Store the token and user role in localStorage
          if (data.token) {
            localStorage.setItem('authToken', data.token);
            localStorage.setItem('userRole', data.role);
          }
          
          // Show the appropriate dashboard
          showDashboard(data.role);
          
          // Close the form after a short delay
          setTimeout(() => {
            closeLoginForm();
          }, 1500);
        } else {
          loginMessage.textContent = data.message || "Invalid OTP!";
          loginMessage.classList.remove("success");
          loginMessage.classList.add("error");
          loginMessage.classList.remove("hidden");
        }
      } catch (error) {
        loginMessage.textContent = "Network error. Please try again.";
        loginMessage.classList.remove("success");
        loginMessage.classList.add("error");
        loginMessage.classList.remove("hidden");
        console.error("OTP verification error:", error);
      }
    }
    
    // Show the appropriate dashboard based on user role
    function showDashboard(role) {
      // Hide main content and all dashboards
      document.getElementById('mainContent').style.display = 'none';
      document.getElementById('alumniDashboard').style.display = 'none';
      document.getElementById('recruiterDashboard').style.display = 'none';
      document.getElementById('universityDashboard').style.display = 'none';
      
      // Show the appropriate dashboard
      switch(role.toLowerCase()) {
        case 'alumni':
          document.getElementById('alumniDashboard').style.display = 'block';
          loadAlumniData();
          break;
        case 'recruiter':
          document.getElementById('recruiterDashboard').style.display = 'block';
          loadRecruiterData();
          break;
        case 'university':
          document.getElementById('universityDashboard').style.display = 'block';
          loadUniversityData();
          break;
        default:
          // If role is not recognized, show main content
          document.getElementById('mainContent').style.display = 'block';
      }
    }
    
    // Load alumni data
    async function loadAlumniData() {
      try {
        const response = await fetch('https://alumni-web-api.onrender.com/api/alumni/profile', {
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('authToken')}`
          }
        });
        
        if (response.ok) {
          const data = await response.json();
          document.getElementById('alumniProfile').innerHTML = `
            <p><strong>Name:</strong> ${data.name}</p>
            <p><strong>University:</strong> ${data.university}</p>
            <p><strong>Graduation Year:</strong> ${data.graduationYear}</p>
          `;
        }
      } catch (error) {
        console.error('Error loading alumni data:', error);
      }
    }
    
    // Load recruiter data
    async function loadRecruiterData() {
      try {
        const response = await fetch('https://alumni-web-api.onrender.com/api/recruiter/profile', {
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('authToken')}`
          }
        });
        
        if (response.ok) {
          const data = await response.json();
          // Display recruiter data as needed
        }
      } catch (error) {
        console.error('Error loading recruiter data:', error);
      }
    }
    
    // Load university data
    async function loadUniversityData() {
      try {
        const response = await fetch('https://alumni-web-api.onrender.com/api/university/profile', {
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('authToken')}`
          }
        });
        
        if (response.ok) {
          const data = await response.json();
          document.getElementById('universityProfile').innerHTML = `
            <p><strong>University Name:</strong> ${data.name}</p>
            <p><strong>Total Alumni:</strong> ${data.alumniCount}</p>
          `;
        }
      } catch (error) {
        console.error('Error loading university data:', error);
      }
    }
    
    // Logout function
    function logout() {
      localStorage.removeItem('authToken');
      localStorage.removeItem('userRole');
      
      // Hide all dashboards and show main content
      document.getElementById('alumniDashboard').style.display = 'none';
      document.getElementById('recruiterDashboard').style.display = 'none';
      document.getElementById('universityDashboard').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
    }
    
    // Close forms when clicking on overlay
    overlay.addEventListener('click', () => {
      closeForm();
      closeLoginForm();
    });
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          window.scrollTo({
            top: targetElement.offsetTop - 70,
            behavior: 'smooth'
          });
        }
      });
    });
  </script>
</body>
</html>