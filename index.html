<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AlumniZONE | Connect & Grow</title>
  <link rel="stylesheet" href="./css/header.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .institute-card {
      cursor: pointer;
      transition: 0.3s ease;
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      border: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .institute-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .institute-logo {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background-color: #f8f9fa;
      padding: 20px;
    }

    @media (max-width: 768px) {
      .institute-logo {
        height: 150px;
      }

      .col-md-4 {
        flex: 0 0 100%;
        max-width: 100%;
      }
    }

    .lazy {
      background-color: #f8f9fa;
      min-height: 200px;
    }

    .verified-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #28a745;
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .verified-badge i {
      font-size: 10px;
    }

    .status-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
    }

    .status-pending {
      background-color: #ffc107;
    }

    .status-rejected {
      background-color: #dc3545;
    }

    .institute-card .card-body {
      padding: 1.5rem;
      background-color: #fff;
    }

    .institute-card .card-title {
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 0.5rem;
    }

    .institute-card .text-muted {
      color: #7f8c8d !important;
      font-size: 0.9rem;
    }

    #institute-list {
      gap: 20px;
    }

    .modal-content {
      border-radius: 10px;
    }

    .modal-header {
      border-bottom: none;
      padding-bottom: 0;
    }

    .modal-title {
      font-weight: 600;
      color: #2c3e50;
    }

    .modal-body img {
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .modal-body h4 {
      color: #2c3e50;
      margin-bottom: 0.5rem;
    }

    .modal-body hr {
      margin: 1.5rem 0;
      opacity: 0.1;
    }

    .modal-body p {
      margin-bottom: 0.8rem;
    }

    .modal-body strong {
      color: #2c3e50;
      min-width: 100px;
      display: inline-block;
    }

    .badge.bg-success {
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: 500;
    }

    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      background-color: #fff;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>

<body>
  <!-- Main Content -->
  <div id="mainContent">
    <!-- Navbar -->
    <div id="header-placeholder"></div>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content container">
        <h1>Welcome to AlumniZONE</h1>
        <p>Connecting Alumni, Students & Recruiters for a Brighter Future!</p>
        <div class="hero-buttons">
          <button onclick="openForm()" class="btn">Register</button>
          <button onclick="openLoginForm()" class="btn btn-outline">LogIN</button>
        </div>
      </div>
    </section>
    <!-- Key Features Section -->
    <!-- Vision Section -->
    <section class="vision py-5 bg-white" id="vision">
      <div class="container">
        <h2 class="text-center mb-4">Our Vision</h2>
        <p class="text-center mb-5">At AlumniZONE, our vision is to revolutionize alumni connectivity using the latest
          technology and human-centered design.</p>
        <div class="row text-center">
          <div class="col-md-4 mb-4">
            <div class="p-4 border rounded shadow-sm h-100">
              <h5>üîç AI-Powered Job Listings</h5>
              <p>Get personalized job opportunities through AI matching based on your profile and preferences.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="p-4 border rounded shadow-sm h-100">
              <h5>üîí Secure & Verified Data</h5>
              <p>Your information is encrypted and verified to ensure privacy, trust, and authenticity.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="p-4 border rounded shadow-sm h-100">
              <h5>üåê Empower Global Networking</h5>
              <p>Break boundaries and connect with alumni and institutions from around the world.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Key Features Section -->
    <section class="features py-5 bg-light" id="features">
      <div class="container">
        <h2 class="text-center mb-4">Key Features</h2>
        <div class="row text-center">
          <div class="col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm h-100">
              <h5>üéì Alumni Dashboard</h5>
              <p>Each college gets its own dashboard to manage and monitor alumni engagement.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm h-100">
              <h5>üåç Explore Best Colleges</h5>
              <p>Anyone can browse and explore top verified colleges ‚Äî no alumni login required.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm h-100">
              <h5>ü§ù Alumni-to-Alumni Connect</h5>
              <p>Build meaningful relationships with fellow alumni across industries and countries.</p>
            </div>
          </div>

          <div class="col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm h-100">
              <h5>üìÖ Event & Reunion Management</h5>
              <p>Organize online and offline events and reunions through one integrated platform.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm h-100">
              <h5>üì¢ Recruiter Access</h5>
              <p>Employers can connect directly with alumni talent from top institutions.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="p-3 bg-white rounded shadow-sm h-100">
              <h5>üß† Student-Friendly Interface</h5>
              <p>Students can explore college profiles, facilities, and alumni success ‚Äî helping them choose the right
                institute.</p>
            </div>
          </div>
        </div>
      </div>
    </section>


    <<!-- About Section -->
      <section class="about bg-light py-5" id="about">
        <div class="container">
          <div class="row align-items-center">

            <!-- Text Content -->
            <div class="col-md-6 mb-4">
              <h2 class="mb-3">About <span class="text-primary">AlumniZONE</span></h2>
              <p><strong>AlumniZONE</strong> is a centralized platform that empowers colleges, universities, alumni, and
                students to stay connected, informed, and inspired.</p>

              <p>We help institutions manage and track alumni data effortlessly while enabling alumni to stay in touch
                with their alma mater and peers across the globe. With AlumniZONE, the journey doesn‚Äôt end at graduation
                ‚Äî it evolves into a lifelong network of opportunity.</p>

              <p>Whether you're a college looking to enhance engagement, an alumnus seeking opportunities, or a student
                exploring top institutes ‚Äî AlumniZONE is your one-stop destination.</p>

              <ul class="list-unstyled mt-4">
                <li>‚úÖ AI-powered job discovery & alumni tracking</li>
                <li>‚úÖ Secure, verified data management</li>
                <li>‚úÖ Global alumni connectivity & networking</li>
                <li>‚úÖ Open access to explore verified colleges</li>
                <li>‚úÖ Event management, mentorship, and more</li>
              </ul>
            </div>

            <!-- Image Content -->
            <div class="col-md-6 text-center">
              <img
                src="https://cdn.prod.website-files.com/5e6bef9160e290b99b7644b5/66c3150c3ba4c88ff1c131f7_banner_%20Universities%20With%20Best%20Alumni%20Network.png"
                alt="Alumni Network Graduation" class="img-fluid rounded shadow"
                style="max-height: 400px; object-fit: cover;">
            </div>
          </div>
        </div>
      </section>


      <!-- How It Works Section -->
      <section class="how-it-works py-5 bg-white" id="how-it-works">
        <div class="container">
          <h2 class="text-center mb-5">How It Works</h2>
          <div class="row text-center">
            <div class="col-md-3 mb-4">
              <div class="p-3 border rounded h-100">
                <h5>1Ô∏è‚É£ Register</h5>
                <p>Alumni and institutions sign up and verify their identity.</p>
              </div>
            </div>
            <div class="col-md-3 mb-4">
              <div class="p-3 border rounded h-100">
                <h5>2Ô∏è‚É£ Build Profile</h5>
                <p>Add educational background, work experience, and skills.</p>
              </div>
            </div>
            <div class="col-md-3 mb-4">
              <div class="p-3 border rounded h-100">
                <h5>3Ô∏è‚É£ Connect & Explore</h5>
                <p>Connect with alumni, attend events, and explore job listings.</p>
              </div>
            </div>
            <div class="col-md-3 mb-4">
              <div class="p-3 border rounded h-100">
                <h5>4Ô∏è‚É£ Stay Engaged</h5>
                <p>Stay connected through notifications, groups, and collaboration tools.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Institutes Section -->
      <section class="institutes-section py-5 bg-light" id="Institutes">
        <div class="container">
          <h2 class="text-center mb-5">Featured Institutes</h2>

          <!-- Search Box -->
          <div class="row mb-4">
            <div class="col-md-6 mx-auto">
              <div class="input-group">
                <input type="text" id="searchInput" class="form-control" placeholder="Search institutes...">
                <button class="btn btn-primary" type="button" id="searchBtn">Search</button>
              </div>
            </div>
          </div>

          <!-- Sort Dropdown -->
          <div class="row mb-4">
            <div class="col-md-3">
              <select class="form-select" id="sortSelect">
                <option value="name-asc">Name (A-Z)</option>
                <option value="name-desc">Name (Z-A)</option>
                <option value="type-asc">Type (A-Z)</option>
                <option value="type-desc">Type (Z-A)</option>
                <option value="status-asc">Status (A-Z)</option>
                <option value="status-desc">Status (Z-A)</option>
              </select>
            </div>
          </div>

          <!-- Loading Spinner -->
          <div id="loading-spinner" class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>

          <!-- Institute List -->
          <div class="row" id="institute-list"></div>

          <!-- Pagination Controls -->
          <div class="d-flex justify-content-center mt-4">
            <button class="btn btn-outline-primary me-2" id="prevBtn">Previous</button>
            <span id="pageInfo" class="mx-3 align-self-center">Page 1 of 1</span>
            <button class="btn btn-outline-primary" id="nextBtn">Next</button>
          </div>
        </div>
      </section>

      <!-- Modal -->
      <div class="modal fade" id="instituteModal" tabindex="-1" aria-labelledby="instituteModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="instituteModalLabel">Institute Details</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalBody">
              <!-- Institute details will be injected here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Features Section -->
      <section class="features" id="features">
        <div class="container">
          <h2>Why Join AlumniZONE?</h2>
          <div class="features-container">
            <div class="feature-box">
              <h3><i class="fas fa-user-graduate"></i> For Alumni</h3>
              <p>Reconnect with your university, mentor juniors, and share opportunities. Stay updated with alumni
                events
                and network with your batchmates.</p>
            </div>
            <div class="feature-box">
              <h3><i class="fas fa-user"></i> For Students</h3>
              <p>Get career guidance, find internships, and learn from experienced alumni. Access exclusive job postings
                and build your professional network.</p>
            </div>
            <div class="feature-box">
              <h3><i class="fas fa-briefcase"></i> For Recruiters</h3>
              <p>Hire talented alumni and students verified by the university. Post jobs, search profiles, and connect
                directly with potential candidates.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <!-- Footer Section -->
      <footer class="bg-dark text-white pt-5 pb-4">
        <div class="container text-md-left">
          <div class="row text-md-left">

            <!-- Logo / Description -->
            <div class="col-md-4 col-lg-4 col-xl-4 mx-auto mt-3">
              <h5 class="text-uppercase mb-4 font-weight-bold text-warning">AlumniZONE</h5>
              <p>A centralized platform that bridges the gap between universities, alumni, and students with secure and
                smart features.</p>
            </div>

            <!-- Quick Links -->
            <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
              <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Quick Links</h5>
              <p><a href="#about" class="text-white" style="text-decoration: none;">About</a></p>
              <p><a href="#features" class="text-white" style="text-decoration: none;">Features</a></p>
              <p><a href="index.html" class="text-white" style="text-decoration: none;">Login</a></p>
              <p><a href="index.html" class="text-white" style="text-decoration: none;">Register</a></p>
            </div>

            <!-- Contact Info -->
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
              <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Contact</h5>
              <p><i class="fas fa-home mr-3"></i> rewa, MP, India</p>
              <p><i class="fas fa-envelope mr-3"></i> support@alumnizone.in</p>
              <p><i class="fas fa-phone mr-3"></i> +91 98765 43210</p>
            </div>

            <!-- Social Media -->
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3 text-center">
              <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Follow Us</h5>
              <a href="#" class="text-white me-3"><i class="fab fa-facebook fa-lg"></i></a>
              <a href="#" class="text-white me-3"><i class="fab fa-twitter fa-lg"></i></a>
              <a href="#" class="text-white me-3"><i class="fab fa-linkedin fa-lg"></i></a>
              <a href="#" class="text-white"><i class="fab fa-instagram fa-lg"></i></a>
            </div>

          </div>

          <hr class="mb-4 text-white">

          <!-- Copyright -->
          <div class="row align-items-center">
            <div class="col-md-8 col-lg-8 text-center text-md-left">
              <p>¬© 2025 AlumniZONE. All Rights Reserved | Developed by <a href="https://itworldhub.com"
                  class="text-warning">Deepak Gupta backend Developer || shailja Dwivedi fornten Developer</a></p>
            </div>
          </div>
        </div>
      </footer>

  </div>

  <!-- Registration Form -->
  <div class="overlay" id="overlay"></div>
  <div class="form-popup" id="registerForm">
    <h2>Register</h2>
    <form id="registrationForm">
      <div id="registerMessage" class="form-message hidden"></div>
      <input type="text" id="registerName" placeholder="Full Name" required>
      <input type="email" id="registerEmail" placeholder="Email ID" required>
      <input type="tel" id="registerPhone" placeholder="Phone Number">
      <select id="userType" onchange="toggleUniversityDropdown()" required>
        <option value="">Select User Type</option>
        <option value="university_admin">University</option>
        <option value="alumni">Alumni</option>
        <option value="recruiter">Recruiter</option>
      </select>
      <select id="universityName" class="hidden">
        <option value="">Choose Your University Name</option>
        <option value="Makhanlal Chaturvedi University">Makhanlal Chaturvedi University</option>
        <option value="Delhi University">Delhi University</option>
        <option value="Mumbai University">Mumbai University</option>
        <option value="JNU">JNU</option>
        <option value="IGNOU">IGNOU</option>
      </select>
      <div id="otpVerificationSection" class="hidden">
        <h3>OTP Verification</h3>
        <p>We've sent an OTP to your email. Please enter it below:</p>
        <input type="text" id="registerOtpInput" placeholder="Enter OTP" class="hidden">
      </div>
      <div class="form-footer">
        <button type="button" id="submitRegisterBtn" class="btn btn-primary"
          onclick="submitRegistration()">Submit</button>
        <button type="button" id="verifyRegisterOtpBtn" class="btn btn-success hidden"
          onclick="verifyRegistrationOTP()">Verify OTP</button>
        <button type="button" class="btn btn-close" onclick="closeForm()">Close</button>
      </div>
    </form>
  </div>

  <!-- Login Form -->
  <div class="form-popup" id="loginForm">
    <h2>Login</h2>
    <form id="otpLoginForm">
      <div id="loginMessage" class="form-message hidden"></div>
      <input type="email" id="loginEmail" placeholder="Email" required>
      <button type="button" class="btn btn-primary" onclick="sendLoginOTP()">Send OTP</button>
      <input type="text" id="otpInput" placeholder="Enter OTP" class="hidden">
      <button type="button" class="btn btn-success hidden" id="verifyOtpBtn" onclick="verifyLoginOTP()">Verify
        OTP</button>
      <div class="form-footer">
        <button type="button" class="btn btn-close" onclick="closeLoginForm()">Close</button>
      </div>
    </form>
  </div>
  <!-- Dashboard Sections -->
  <div id="alumniDashboard" class="dashboard">
    <header class="dashboard-header">
      <h1>Alumni Dashboard</h1>
      <button class="btn" onclick="logout()">Logout</button>
    </header>
    <div class="dashboard-container">
      <div class="dashboard-card">
        <h2>Welcome, <span id="alumniName"></span>!</h2>
        <p>Here you can connect with your university, network with other alumni, and find opportunities.</p>
      </div>
      <div class="dashboard-card">
        <h3>Your Profile</h3>
        <div id="alumniProfile">
          <p><strong>Name:</strong> <span id="profileName"></span></p>
          <p><strong>University:</strong> <span id="profileUniversity"></span></p>
          <p><strong>Graduation Year:</strong> <span id="profileYear"></span></p>
        </div>
      </div>
      <div class="dashboard-card">
        <h3>Upcoming Events</h3>
        <div id="alumniEvents">
          <p>Loading events...</p>
        </div>
      </div>
    </div>
  </div>

  <div id="recruiterDashboard" class="dashboard">
    <header class="dashboard-header" style="background-color: #e74c3c;">
      <h1>Recruiter Dashboard</h1>
      <button class="btn" style="background-color: #e74c3c;" onclick="logout()">Logout</button>
    </header>
    <div class="dashboard-container">
      <div class="dashboard-card">
        <h2>Welcome, Recruiter!</h2>
        <p>Find and connect with talented alumni from top universities.</p>
      </div>
      <div class="dashboard-card">
        <h3>Post New Job</h3>
        <form id="jobPostForm">
          <input type="text" placeholder="Job Title" required>
          <textarea placeholder="Job Description" required></textarea>
          <button type="submit" class="btn" style="background-color: #e74c3c;">Post Job</button>
        </form>
      </div>
      <div class="dashboard-card">
        <h3>Your Job Posts</h3>
        <div id="jobPosts">
          <p>Loading job posts...</p>
        </div>
      </div>
    </div>
  </div>

  <div id="universityDashboard" class="dashboard">
    <header class="dashboard-header" style="background-color: #2ecc71;">
      <h1>University Dashboard</h1>
      <button class="btn" style="background-color: #2ecc71;" onclick="logout()">Logout</button>
    </header>
    <div class="dashboard-container">
      <div class="dashboard-card">
        <h2>Welcome, <span id="universityTitle"></span>!</h2>
        <p>Manage your alumni network and university profile.</p>
      </div>
      <div class="dashboard-card">
        <h3>University Profile</h3>
        <div id="universityProfile">
          <p><strong>University Name:</strong> <span id="uniName"></span></p>
          <p><strong>Total Alumni:</strong> <span id="uniAlumniCount"></span></p>
        </div>
      </div>
      <div class="dashboard-card">
        <h3>Alumni Management</h3>
        <div id="alumniManagement">
          <p>Loading alumni data...</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_URL = `https://alumni-web-api.onrender.com/api/public/institutes`;

    // const API_URL = "http://localhost:3000/api/public/institutes";
    const ITEMS_PER_PAGE = 6;
    let currentPage = 1;
    let approvedInstitutes = [];
    let filteredInstitutes = [];

    async function fetchInstitutes() {
      try {
        document.getElementById('loading-spinner').style.display = 'block';
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error('Network response was not ok');
        const data = await res.json();
        approvedInstitutes = data.filter(inst => inst.status !== 'pending' && inst.status !== 'rejected');
        renderInstitutes();
      } catch (error) {
        console.error("Error fetching institutes:", error);
        const list = document.getElementById('institute-list');
        list.innerHTML = `
          <div class="col-12 text-center py-5">
            <div class="alert alert-danger">
              Failed to load institutes. Please try again later.
            </div>
            <button class="btn btn-primary" onclick="fetchInstitutes()">Retry</button>
          </div>
        `;
      } finally {
        document.getElementById('loading-spinner').style.display = 'none';
      }
    }

    function renderInstitutes(useFiltered = false) {
      const list = document.getElementById('institute-list');
      list.innerHTML = '';

      const dataToUse = useFiltered ? filteredInstitutes : approvedInstitutes;
      const start = (currentPage - 1) * ITEMS_PER_PAGE;
      const end = start + ITEMS_PER_PAGE;
      const paginatedData = dataToUse.slice(start, end);

      if (paginatedData.length === 0) {
        list.innerHTML = `
          <div class="col-12 text-center py-5">
            <div class="alert alert-info">
              No institutes found. Try adjusting your search.
            </div>
          </div>
        `;
        updateButtons(dataToUse);
        return;
      }

      paginatedData.forEach((inst, index) => {
        const col = document.createElement('div');
        col.className = 'col-md-4 mb-4';

        // Determine status badge
        let statusBadge = '';
        if (inst.status === 'Verified') {
          statusBadge = '<span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span>';
        } else if (inst.status === 'pending') {
          statusBadge = '<span class="status-badge status-pending">Pending</span>';
        } else if (inst.status === 'rejected') {
          statusBadge = '<span class="status-badge status-rejected">Rejected</span>';
        }

        col.innerHTML = `
          <div class="card institute-card h-100" onclick="showDetails(${start + index}, ${useFiltered})">
            ${statusBadge}
            <img src="placeholder.jpg" data-src="${inst.logo}" alt="${inst.instituteName}" class="card-img-top institute-logo lazy">
            <div class="card-body text-center">
              <h5 class="card-title">${inst.instituteName}</h5>
              <p class="text-muted">${inst.instituteType}</p>
            </div>
          </div>
        `;
        list.appendChild(col);
      });

      // Initialize lazy loading
      initLazyLoading();
      updateButtons(dataToUse);
    }

    function initLazyLoading() {
      const lazyImages = [].slice.call(document.querySelectorAll('img.lazy'));

      if ('IntersectionObserver' in window) {
        let lazyImageObserver = new IntersectionObserver(function (entries, observer) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              let lazyImage = entry.target;
              lazyImage.src = lazyImage.dataset.src;
              lazyImage.classList.remove('lazy');
              lazyImageObserver.unobserve(lazyImage);
            }
          });
        });

        lazyImages.forEach(function (lazyImage) {
          lazyImageObserver.observe(lazyImage);
        });
      }
    }

    function updateButtons(data = approvedInstitutes) {
      const totalPages = Math.ceil(data.length / ITEMS_PER_PAGE);
      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = currentPage === totalPages || totalPages === 0;
      document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${totalPages}`;
    }

    function showDetails(index, isFromFiltered = false) {
      const inst = isFromFiltered ? filteredInstitutes[index] : approvedInstitutes[index];
      const modalBody = document.getElementById('modalBody');

      // Status badge for modal
      let statusBadge = '';
      if (inst.status === 'Verified') {
        statusBadge = '<span class="badge bg-success mb-3"><i class="fas fa-check-circle me-1"></i> Verified</span>';
      } else if (inst.status === 'pending') {
        statusBadge = '<span class="badge bg-warning text-dark mb-3">Pending</span>';
      } else if (inst.status === 'rejected') {
        statusBadge = '<span class="badge bg-danger mb-3">Rejected</span>';
      }

      modalBody.innerHTML = `
        <div class="text-center mb-4">
          <img src="${inst.logo}" alt="${inst.instituteName}" style="max-height: 150px; object-fit: contain;">
          ${statusBadge}
        </div>
        <h4 class="text-center">${inst.instituteName}</h4>
        <p class="text-center"><strong>Type:</strong> ${inst.instituteType}</p>
        <hr>
        <p><strong>Email:</strong> ${inst.email}</p>
        <p><strong>Phone:</strong> ${inst.phone}</p>
        <p><strong>Website:</strong> <a href="${inst.website}" target="_blank">${inst.website}</a></p>
        <p><strong>Affiliations:</strong> ${inst.affiliations.join(", ")}</p>
        <p><strong>Address:</strong> ${inst.address.city}, ${inst.address.state} - ${inst.address.pinCode}</p>
        <hr>
        <h5>Added By:</h5>
        <p><strong>Name:</strong> ${inst.userId.name}</p>
        <p><strong>Email:</strong> ${inst.userId.email}</p>
        <p><strong>Role:</strong> ${inst.userId.role}</p>
      `;
      const modal = new bootstrap.Modal(document.getElementById('instituteModal'));
      modal.show();
    }

    // Event Listeners
    document.getElementById('prevBtn').addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        renderInstitutes();
      }
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      const totalPages = Math.ceil((filteredInstitutes.length > 0 ? filteredInstitutes : approvedInstitutes).length / ITEMS_PER_PAGE);
      if (currentPage < totalPages) {
        currentPage++;
        renderInstitutes(filteredInstitutes.length > 0);
      }
    });

    document.getElementById('searchBtn').addEventListener('click', () => {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      filteredInstitutes = approvedInstitutes.filter(inst =>
        inst.instituteName.toLowerCase().includes(searchTerm) ||
        inst.instituteType.toLowerCase().includes(searchTerm) ||
        inst.address.city.toLowerCase().includes(searchTerm)
      );
      currentPage = 1;
      renderInstitutes(true);
    });

    document.getElementById('sortSelect').addEventListener('change', (e) => {
      const value = e.target.value;

      approvedInstitutes.sort((a, b) => {
        switch (value) {
          case 'name-asc': return a.instituteName.localeCompare(b.instituteName);
          case 'name-desc': return b.instituteName.localeCompare(a.instituteName);
          case 'type-asc': return a.instituteType.localeCompare(b.instituteType);
          case 'type-desc': return b.instituteType.localeCompare(a.instituteType);
          case 'status-asc': return a.status.localeCompare(b.status);
          case 'status-desc': return b.status.localeCompare(a.status);
          default: return 0;
        }
      });

      currentPage = 1;
      renderInstitutes();
    });

    // Initial Fetch
    fetchInstitutes();
  </script>

  <script>
    // Load the reusable header
    fetch('../component/header.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById('header-placeholder').innerHTML = data;

        // Re-attach menu toggles and nav logic after loading header
        const mobileMenu = document.getElementById('mobile-menu');
        const navLinks = document.getElementById('nav-links');
        if (mobileMenu && navLinks) {
          mobileMenu.addEventListener('click', () => {
            navLinks.classList.toggle('show');
          });
        }

        // Attach profile redirection
        const profileLink = document.getElementById('profileLink');
        if (profileLink) {
          profileLink.addEventListener('click', function (e) {
            e.preventDefault();
            redirectToRoleDashboard(localStorage.getItem('userRole'));
          });
        }

        // Logout button
        const logoutBtn = document.getElementById('logoutLink');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', logout);
        }

        updateNavbar();
        loadUniversityData();
      });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./javascript/script.js"></script>
</body>

</html>